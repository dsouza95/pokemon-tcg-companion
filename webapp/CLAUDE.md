# Frontend — Pokemon TCG Companion

## Stack

- **Next.js 16** (App Router), **React 19**, **TypeScript 5**
- **Tailwind CSS 4**, **shadcn/ui** (Base UI + Radix primitives), **clsx + tailwind-merge** (`cn()`)
- **TanStack Query v5** for server state
- **pnpm**, **ESLint** (next config)
- **openapi-typescript** for type-safe API client

## Commands

```bash
pnpm dev          # dev server
pnpm build        # production build (must pass before merging)
pnpm lint         # ESLint
pnpm openapi      # regenerate lib/openapi-types.ts from lib/openapi.json
```

## API Types

- **Never manually define types for API shapes.** All API types come from `lib/openapi-types.ts`, generated by `openapi-typescript` from `lib/openapi.json`.
- When the backend schema changes, run `pnpm openapi` to regenerate, then fix any type errors.
- Use the generated `components["schemas"]["Foo"]` and `paths["/foo"]["get"]["responses"]["200"]["content"]["application/json"]` types directly.

## Data Fetching

- Use **TanStack Query** (`useQuery`, `useMutation`) for all server state. Do not use `useState` + `useEffect` for fetching.
- Define query/mutation functions in `hooks/` alongside their query keys.
- Invalidate related queries after mutations rather than manually updating cache where possible.
- Prefer `queryClient.invalidateQueries` over optimistic updates unless latency is a user-visible problem.

## Component Conventions

- UI primitives come from **shadcn** (Base UI / Radix). Add new components via `pnpm dlx shadcn add <component>` rather than writing from scratch.
- All className composition uses `cn()` from `lib/utils.ts` — never string concatenation.
- Keep components co-located with their route in `app/` unless used across multiple routes, in which case they go in `components/`.
- Frontend Components by default; add `"use client"` unless the component heavily benefits from SSR.

## Styling

- Tailwind 4 — use utility classes directly; avoid custom CSS except for `globals.css` base styles.
- No inline `style` props unless values are dynamic and cannot be expressed as Tailwind utilities.
- Responsive design uses Tailwind breakpoint prefixes (`sm:`, `md:`, etc.).

## TypeScript

- `strict` mode is on. All code must type-check cleanly — `pnpm build` will catch errors.
- Avoid `any`. Use `unknown` and narrow explicitly, or derive types from the openapi-types.
- Prefer `type` over `interface` for object shapes derived from API types.
